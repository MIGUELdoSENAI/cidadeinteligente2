<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatÃ©ria-Prima e Sustentabilidade - SmartCity</title>
    <link rel="stylesheet" href="/css/materiaprima.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="/js/materiaprima.js" defer></script>
</head>
<body>
    <!-- TOPBAR -->
    <header class="topbar">
        <div class="topbar-left">
            <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
            <img src="Kapwbs.png" alt="KAPWBS Logo" class="logo-image">
        </div>
        <div class="topbar-right">
            <button class="theme-toggle" onclick="toggleTheme()" title="Alternar tema">ğŸŒ™</button>
            <div class="system-status">
                <span class="status-dot"></span>
                <span>Sistema Online</span>
            </div>
            <button class="logout-topbar" onclick="showLogoutPopup()">Logout</button>
        </div>
    </header>

    <!-- LOGOUT POPUP -->
    <div id="logoutPopup" class="popup-overlay">
        <div class="popup">
            <h3>Confirmar Logout</h3>
            <p>Deseja realmente sair do sistema?</p>
            <div class="popup-buttons">
                <button class="btn btn-cancel" onclick="closeLogoutPopup()">Cancelar</button>
                <button class="btn btn-logout" onclick="logout()">Sair</button>
            </div>
        </div>
    </div>

    <!-- SIDEBAR -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-nav">
            <a href="dashboard.html" class="nav-item">
                <i>ğŸ“Š</i> Dashboard
            </a>
            <a href="bueiros.html" class="nav-item">
                <i>ğŸ•³ï¸</i> Bueiros
            </a>
            <a href="energia.html" class="nav-item">
                <i>âš¡</i> Energia
            </a>
            <a href="materiaprima.html" class="nav-item active">
                <i>â™»ï¸</i> MatÃ©ria-Prima
            </a>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="main-content">
        <!-- HEADER -->
        <div class="header">
            <h1>ğŸŒ± RecuperaÃ§Ã£o de MatÃ©ria-Prima e Impacto Ambiental</h1>
            <p>Monitoramento de sustentabilidade e anÃ¡lise de impacto ambiental positivo</p>
            
            <!-- Quick Stats Bar -->
            <div class="quick-stats-bar">
                <div class="quick-stat">
                    <span class="stat-icon">ğŸ“ˆ</span>
                    <span class="stat-text">ResÃ­duos este mÃªs: <strong id="monthlyWaste">2,150</strong> kg</span>
                </div>
                <div class="quick-stat">
                    <span class="stat-icon">ğŸŒ</span>
                    <span class="stat-text">Carbono economizado: <strong id="monthlyCO2">215</strong> kg</span>
                </div>
                <div class="quick-stat">
                    <span class="stat-icon">ğŸ¯</span>
                    <span class="stat-text">Meta mensal: <strong id="monthlyTarget">65%</strong> atingida</span>
                </div>
            </div>
        </div>

        <!-- MÃ‰TRICAS PRINCIPAIS -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-icon">â™»ï¸</div>
                <div class="metric-label">ResÃ­duos Desviados</div>
                <div class="metric-value" id="wasteDivertedValue">15000</div>
                <div class="metric-unit">kg</div>
                <div class="metric-change">â†‘ +250 kg neste mÃªs</div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">ğŸ’¨</div>
                <div class="metric-label">Carbono Mitigado</div>
                <div class="metric-value" id="co2ReducedValue">5000</div>
                <div class="metric-unit">kg COâ‚‚ equivalente</div>
                <div class="metric-change">â†‘ +25 kg COâ‚‚ neste mÃªs</div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">âš¡</div>
                <div class="metric-label">Energia RenovÃ¡vel</div>
                <div class="metric-value" id="renewableEnergyValue">2840</div>
                <div class="metric-unit">kWh</div>
                <div class="metric-change">â†‘ +84 kWh neste mÃªs</div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">ğŸ”¥</div>
                <div class="metric-label">ContribuiÃ§Ã£o BiogÃ¡s</div>
                <div class="metric-value" id="biogasContributionValue">15</div>
                <div class="metric-unit">%</div>
                <div class="metric-change">â†‘ +0.5% neste mÃªs</div>
            </div>
        </div>

        <!-- CHARTS -->
        <div class="charts-section">
            <div class="chart-card">
                <h3>ğŸ“Š EvoluÃ§Ã£o de ResÃ­duos Desviados (Ãºltimos 12 meses)</h3>
                <div class="chart-container">
                    <canvas id="wasteChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h3>ğŸŒ Impacto de Carbono (Ãºltimos 12 meses)</h3>
                <div class="chart-container">
                    <canvas id="carbonChart"></canvas>
                </div>
            </div>
        </div>

        <!-- IMPACT SECTION -->
        <div class="impact-grid">
            <div class="impact-card">
                <h4>ğŸŒ² Ãrvores Economizadas</h4>
                <p class="impact-description">A cada 100kg de resÃ­duos desviados, economizamos aproximadamente 1 Ã¡rvore. Total economizado: 150 Ã¡rvores.</p>
            </div>
            <div class="impact-card">
                <h4>ğŸ’§ Ãgua Preservada</h4>
                <p class="impact-description">Processo de reciclagem economiza cerca de 500 litros de Ã¡gua por kg de material processado. Total preservado: 7.5 milhÃµes de litros.</p>
            </div>
            <div class="impact-card">
                <h4>ğŸ­ ReduÃ§Ã£o de Aterro</h4>
                <p class="impact-description">ReduÃ§Ã£o significativa do volume de resÃ­duos destinados a aterros sanitÃ¡rios, prolongando sua vida Ãºtil.</p>
            </div>
        </div>
    </div>

    <!-- Floating action buttons -->
    <div class="floating-buttons-container">
        <button class="refresh-btn" onclick="refreshData()">
            <span class="fab-tooltip">Atualizar Dados</span>
            âŸ³
        </button>
        <button class="simulate-btn" onclick="simulateMaterialsCollection()">
            <span class="fab-tooltip">Simular Coleta</span>
            âš¡
        </button>
        <button class="export-btn" onclick="exportMetricsReport()">
            <span class="fab-tooltip">Exportar RelatÃ³rio</span>
            ğŸ“„
        </button>
    </div>
</body>
</html>